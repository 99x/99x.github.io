

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Orchestration engine &mdash; glu v2.4.0 documentation</title>
    <link rel="stylesheet" href="_static/agogo.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '2.4.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="glu v2.4.0 documentation" href="index.html" />
    <link rel="next" title="Static Model" href="static-model.html" />
    <link rel="prev" title="glu script" href="glu-script.html" />
 
<link rel="stylesheet" href="_static/glu.css" type="text/css" />
<script type="text/javascript" src="http://widgets.twimg.com/j/2/widget.js"></script>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-8362808-4']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

  </head>
  <body>
    <div class="header-wrapper">
      <div class="header">
          <p class="logo"><a href="contents.html">
            <img class="logo" src="_static/glu-logo-214x72.png" alt="Logo"/>
          </a></p>
        <h1><a href="contents.html">glu v2.4.0 documentation</a></h1>
        <div class="rel">
          <a href="glu-script.html" title="glu script"
             accesskey="P">previous</a> |
          <a href="static-model.html" title="Static Model"
             accesskey="N">next</a> |
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a>
        </div>
       </div>
    </div>

<div class="content-wrapper">
<div class="content">
<div class="document">
  
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="orchestration-engine-logo-orchestration-engine">
<h1><img alt="console logo" class="header-logo" src="_images/orchestration-engine-logo-86.png" /> Orchestration engine<a class="headerlink" href="#orchestration-engine-logo-orchestration-engine" title="Permalink to this headline">¶</a></h1>
<p>The orchestration engine is the heart of the whole system. Its responsibility is to listen to ZooKeeper events (coming from the glu agents), compute the <a class="reference internal" href="glossary.html#term-delta"><em class="xref std std-term">delta</em></a> and orchestrate the deployment plans.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Currently the orchestration engine is bundled with the console and is not running as a separate process. Please check the <a class="reference internal" href="console.html"><em>console</em></a> documentation regarding installation and configuration.</p>
</div>
<div class="section" id="key-components">
<h2>Key Components<a class="headerlink" href="#key-components" title="Permalink to this headline">¶</a></h2>
<img alt="orchestration engine key components" class="align-center" src="_images/goe-in-action-413.png" />
<div class="section" id="tracker-logo-tracker">
<span id="goe-tracker"></span><h3><img alt="tracker" class="header-logo" src="_images/tracker-logo-86.png" /> Tracker<a class="headerlink" href="#tracker-logo-tracker" title="Permalink to this headline">¶</a></h3>
<p>The role of the tracker is to listen to ZooKeeper events. Under the cover, the tracker uses <a class="reference external" href="http://zookeeper.apache.org/doc/r3.3.1/zookeeperOver.html#Conditional+updates+and+watches">ZooKeeper watches</a>. This makes the tracker very leightweight and efficient as it receives notifications only when something changes in the system.</p>
<p>For example, it gets notified immediately when:</p>
<ul class="simple">
<li>a new agent is added (case when a new node is added to the system)</li>
<li>an agent disappears (case when a node crashes or reboot for example)</li>
<li>a script state changes</li>
<li>...</li>
</ul>
<p>From the information collected (and updated real-time) by the tracker, the orchestration engine can compute the <a class="reference internal" href="#goe-live-model"><em>live model</em></a>.</p>
</div>
<div class="section" id="live-model-logo-live-model">
<span id="goe-live-model"></span><h3><img alt="live model" class="header-logo" src="_images/live-model-logo-86.png" /> Live Model<a class="headerlink" href="#live-model-logo-live-model" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="glossary.html#term-live-model"><em class="xref std std-term">live model</em></a> is computed by the orchestration engine from the information collected by the <a class="reference internal" href="#goe-tracker"><em>tracker</em></a>. The live model is the representation of the <a class="reference internal" href="glossary.html#term-live-state"><em class="xref std std-term">live state</em></a> which is used for computing the <a class="reference internal" href="#goe-delta"><em>delta</em></a>. Besides being used as an input to the <a class="reference internal" href="#goe-delta-service"><em>delta service</em></a> in order to compute the delta, the live model has several representation that you have access to:</p>
<div class="section" id="from-the-console">
<h4>From the console<a class="headerlink" href="#from-the-console" title="Permalink to this headline">¶</a></h4>
<p>If you navigate to an agent view page in the console, and for any given entry you click on the <tt class="docutils literal"><span class="pre">View</span> <span class="pre">Details</span></tt> (toggle), you will see something like this:</p>
<img alt="console entry detail" class="align-center" src="_images/goe-live-model-console-600.gif" />
<p>The information displayed here is exactly what the tracker has captured from ZooKeeper.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In this screenshot you can even see how the script running on the remote agent has detected a failure and reported it. Thanks to ZooKeeper watches, the failure is propagated real-time and made available so that the user can fix the problem.</p>
</div>
</div>
<div class="section" id="from-the-command-line">
<h4>From the command line<a class="headerlink" href="#from-the-command-line" title="Permalink to this headline">¶</a></h4>
<p>From a shell terminal, you can issue:</p>
<div class="highlight-text"><div class="highlight"><pre>./bin/console-cli.sh -f glu-dev-1 -u admin -x admin -b -l status
</pre></div>
</div>
<p>The important flag is <tt class="docutils literal"><span class="pre">-l</span></tt> which request the <em>live</em> model. You get an output very similar to the one in the console (more detailed though):</p>
<div class="highlight-text"><div class="highlight"><pre>{
  &quot;entries&quot;: [{
    &quot;agent&quot;: &quot;agent-1&quot;,
    &quot;initParameters&quot;: {
      &quot;port&quot;: 9000,
      &quot;skeleton&quot;: &quot;http://localhost:8080/glu/repository/tgzs/jetty-distribution-7.2.2.v20101205.tar.gz&quot;,
      &quot;webapps&quot;: [
        {
          &quot;contextPath&quot;: &quot;/cp1&quot;,
          &quot;monitor&quot;: &quot;/monitor&quot;,
          &quot;war&quot;: &quot;http://localhost:8080/glu/repository/wars/org.linkedin.glu.samples.sample-webapp-2.2.0.war&quot;
        },
        {
          &quot;contextPath&quot;: &quot;/cp2&quot;,
          &quot;monitor&quot;: &quot;/monitor&quot;,
          &quot;war&quot;: &quot;http://localhost:8080/glu/repository/wars/org.linkedin.glu.samples.sample-webapp-2.2.0.war&quot;
        }
      ]
    },
    &quot;metadata&quot;: {
      &quot;cluster&quot;: &quot;c1&quot;,
      &quot;container&quot;: {&quot;name&quot;: &quot;sample&quot;},
      &quot;currentState&quot;: &quot;stopped&quot;,
      &quot;error&quot;: &quot;Server down detected. Check the log file for errors.&quot;,
      &quot;modifiedTime&quot;: 1302883875857,
      &quot;product&quot;: &quot;product1&quot;,
      &quot;scriptState&quot;: {
        &quot;script&quot;: {
          &quot;gcLog&quot;: &quot;file:/export/content/glu/org.linkedin.glu.packaging-all-2.2.0/apps/sample/i001/logs/gc.log&quot;,
          &quot;logsDir&quot;: &quot;file:/export/content/glu/org.linkedin.glu.packaging-all-2.2.0/apps/sample/i001/logs/&quot;,
          &quot;port&quot;: 9000,
          &quot;serverCmd&quot;: &quot;file:/export/content/glu/org.linkedin.glu.packaging-all-2.2.0/apps/sample/i001/bin/jetty-ctl.sh&quot;,
          &quot;serverLog&quot;: &quot;file:/export/content/glu/org.linkedin.glu.packaging-all-2.2.0/apps/sample/i001/logs/start.log&quot;,
          &quot;serverRoot&quot;: &quot;file:/export/content/glu/org.linkedin.glu.packaging-all-2.2.0/apps/sample/i001/&quot;,
          &quot;version&quot;: &quot;2.2.0&quot;,
          &quot;webapps&quot;: {
            &quot;/cp1&quot;: {
              &quot;context&quot;: &quot;file:/export/content/glu/org.linkedin.glu.packaging-all-2.2.0/apps/sample/i001/contexts/_cp1.xml&quot;,
              &quot;contextPath&quot;: &quot;/cp1&quot;,
              &quot;localWar&quot;: &quot;file:/export/content/glu/org.linkedin.glu.packaging-all-2.2.0/apps/sample/i001/wars/_cp1.war&quot;,
              &quot;monitor&quot;: &quot;/monitor&quot;,
              &quot;remoteWar&quot;: &quot;http://localhost:8080/glu/repository/wars/org.linkedin.glu.samples.sample-webapp-2.2.0.war&quot;
            },
            &quot;/cp2&quot;: {
              &quot;context&quot;: &quot;file:/export/content/glu/org.linkedin.glu.packaging-all-2.2.0/apps/sample/i001/contexts/_cp2.xml&quot;,
              &quot;contextPath&quot;: &quot;/cp2&quot;,
              &quot;localWar&quot;: &quot;file:/export/content/glu/org.linkedin.glu.packaging-all-2.2.0/apps/sample/i001/wars/_cp2.war&quot;,
              &quot;monitor&quot;: &quot;/monitor&quot;,
              &quot;remoteWar&quot;: &quot;http://localhost:8080/glu/repository/wars/org.linkedin.glu.samples.sample-webapp-2.2.0.war&quot;
            }
          }
        },
        &quot;stateMachine&quot;: {
          &quot;currentState&quot;: &quot;stopped&quot;,
          &quot;error&quot;: &quot;Server down detected. Check the log file for errors.&quot;
        },
        &quot;timers&quot;: [{
          &quot;repeatFrequency&quot;: &quot;15s&quot;,
          &quot;timer&quot;: &quot;serverMonitor&quot;
        }]
      },
      &quot;version&quot;: &quot;1.0.0&quot;
    },
    &quot;mountPoint&quot;: &quot;/sample/i001&quot;,
    &quot;script&quot;: &quot;http://localhost:8080/glu/repository/scripts/org.linkedin.glu.script-jetty-2.2.0/JettyGluScript.groovy&quot;,
    &quot;tags&quot;: [
      &quot;frontend&quot;,
      &quot;osx&quot;,
      &quot;webapp&quot;
    ]
  }],
  &quot;fabric&quot;: &quot;glu-dev-1&quot;,
  &quot;metadata&quot;: {
    &quot;accuracy&quot;: &quot;ACCURATE&quot;,
    &quot;emptyAgents&quot;: []
  }
}
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>without any filter (see <a class="reference internal" href="filtering.html"><em> Filtering</em></a>), you will get the entire model, not just the single entry. In order to select a single entry you can use the filter shortcut <tt class="docutils literal"><span class="pre">-I</span> <span class="pre">agent-1:/sample/i001</span></tt> like this:</p>
<div class="last highlight-text"><div class="highlight"><pre>./bin/console-cli.sh -f glu-dev-1 -u admin -x admin -b -l -I agent-1:/sample/i001 status
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="static-model-logo-static-model">
<span id="goe-static-model"></span><h3><img alt="static model" class="header-logo" src="_images/static-model-logo-86.png" /> Static Model<a class="headerlink" href="#static-model-logo-static-model" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="glossary.html#term-static-model"><em class="xref std std-term">static model</em></a> is an input to the orchestration engine. It describes the state of the entire system (for a given <a class="reference internal" href="glossary.html#term-fabric"><em class="xref std std-term">fabric</em></a>). The static model gets <em>loaded</em> in the orchestration engine either from the console web application, REST api or command line (<tt class="docutils literal"><span class="pre">-m</span></tt> option). Once loaded, the static model remains the <em>current</em> model until a new one is loaded.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Check out the separate entry about the <a class="reference internal" href="static-model.html"><em>static model</em></a> for more information.</p>
</div>
</div>
<div class="section" id="delta-service-logo-delta-service">
<span id="goe-delta-service"></span><h3><img alt="delta service" class="header-logo" src="_images/delta-service-logo-86.png" /> Delta Service<a class="headerlink" href="#delta-service-logo-delta-service" title="Permalink to this headline">¶</a></h3>
<p>The delta service is in charge of computing the <a class="reference internal" href="#goe-delta"><em>delta</em></a> between the <a class="reference internal" href="#goe-live-model"><em>live model</em></a> and the <a class="reference internal" href="#goe-static-model"><em>static model</em></a>. As mentionned previously, the static model used is the latest one that was loaded (or selected as current). The live model is coming from the <a class="reference internal" href="#goe-tracker"><em>tracker</em></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>In the event that there is an issue with the connection to ZooKeeper, the delta service will still be able to generate <em>deltas</em> but they will be flagged accordingly because the live model is no longer real-time. In the output of the <a class="reference internal" href="#goe-live-model"><em>live model</em></a> you can see this in action (in this case there was no problem):</p>
<div class="last highlight-text"><div class="highlight"><pre>&quot;metadata&quot;: {
  &quot;accuracy&quot;: &quot;ACCURATE&quot;,
  ...
}
</pre></div>
</div>
</div>
</div>
<div class="section" id="delta-logo-delta">
<span id="goe-delta"></span><h3><img alt="delta" class="header-logo" src="_images/delta-logo-79.png" /> Delta<a class="headerlink" href="#delta-logo-delta" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="glossary.html#term-delta"><em class="xref std std-term">delta</em></a> is the result of the computation done by the <a class="reference internal" href="#goe-delta-service"><em>delta service</em></a>. The delta is fed into the <a class="reference internal" href="#goe-visualizer"><em>visualizer</em></a> and/or the <a class="reference internal" href="#goe-planner"><em>planner</em></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">At this moment, the delta is an internal concept not directly available but as it is driving the visualizer and planner, you have the ability to see different representations of it.</p>
</div>
</div>
<div class="section" id="visualizer-logo-visualizer">
<span id="goe-visualizer"></span><h3><img alt="visualizer" class="header-logo" src="_images/visualizer-logo-86.png" /> Visualizer<a class="headerlink" href="#visualizer-logo-visualizer" title="Permalink to this headline">¶</a></h3>
<p>The visualizer is in charge of turning the delta into a <em>visual</em> representation. This is represented in the console by the dashboard:</p>
<img alt="console dashboard" class="align-center" src="_images/goe-visualizer-dashboard.png" />
<p>In this screenshot which represents 3 applications deployed on 1 agent (coming from the <a class="reference internal" href="tutorial.html"><em>tutorial</em></a>) you can directly see the delta in action:</p>
<ul>
<li><p class="first">when a row is green (2nd row), it means that there is actually no delta: the static model and the live model are identical (or another way to say it, is that the desired state matches the live state)</p>
</li>
<li><dl class="first docutils">
<dt>when a row is red (1st and 3rd row), it means that there is a discrepancy between the static model and the live model. The last column (<tt class="docutils literal"><span class="pre">status</span></tt>) is giving more information about what kind of delta was detected:</dt>
<dd><ul class="first last simple">
<li>for row 1, the application is actually deployed but is not running (this is what you can see in the screenshot for the <a class="reference internal" href="#goe-live-model"><em>live model</em></a>): the entry appears in the live model but with a mismatching state</li>
<li>for row 3, the application is not deployed at all: the entry is totally absent from the live model</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="planner-logo-planner">
<span id="goe-planner"></span><h3><img alt="planner" class="header-logo" src="_images/planner-logo-86.png" /> Planner<a class="headerlink" href="#planner-logo-planner" title="Permalink to this headline">¶</a></h3>
<p>The planner is in charge of turning the delta into a <a class="reference internal" href="#goe-plan"><em>deployment plan</em></a>.</p>
</div>
<div class="section" id="plan-logo-deployment-plan">
<span id="goe-plan"></span><h3><img alt="plan" class="header-logo" src="_images/plan-logo-79.png" /> Deployment Plan<a class="headerlink" href="#plan-logo-deployment-plan" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="glossary.html#term-deployment-plan"><em class="xref std std-term">deployment plan</em></a> is the set of instructions (generated by the <a class="reference internal" href="#goe-planner"><em>planner</em></a>) which can be fed to the <a class="reference internal" href="#goe-deployer"><em>deployer</em></a> in order to <em>fix</em> the delta computed by the <a class="reference internal" href="#goe-delta-service"><em>delta service</em></a>. The idea is that if all instructions get executed successfully, then there won&#8217;t be any delta anymore.</p>
<p>An instruction is (usually) a call (using the secure REST api) to an agent to perform a particular action (as described in the section &#8220;<a class="reference internal" href="agent.html#agent-glu-script-engine"><em>glu Script Engine</em></a>&#8221;).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">As mentionned in the <a class="reference internal" href="index.html"><em>What is glu?</em></a> section, the plan is <strong>never</strong> executed unless <strong>you</strong> give your explicit approval.</p>
</div>
<p>The deployment plan has several representations:</p>
<div class="section" id="id1">
<h4>From the Console<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<p>Using the same delta you could visualize on the <a class="reference internal" href="#goe-visualizer"><em>dashboard</em></a>, the planner can compute various plans depending on what you instruct it to do.</p>
<p>From the console, you have the ability to</p>
<ul>
<li><p class="first">select a sequential plan:</p>
<img alt="console sequential plan" class="align-center" src="_images/goe-plan-sequential.png" />
</li>
<li><p class="first">select a parallel plan:</p>
<img alt="console parallel plan" class="align-center" src="_images/goe-plan-parallel.png" />
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">the numbers in front of each instruction show you in which order they will be executed. A parallel plan will execute much faster than a sequential plan since the instructions will run in parallel so you don&#8217;t have to wait for previous instructions to complete. In a sequential plan, an error in an instruction will abort the entire remaining of the plan.</p>
</div>
</div>
<div class="section" id="id2">
<h4>From the Command Line<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
<p>The exact same data is also available from the command line (hence the REST api):</p>
<div class="highlight-text"><div class="highlight"><pre>./bin/console-cli.sh -f glu-dev-1 -u admin -x admin -a -n deploy
</pre></div>
</div>
<p>will produce the following output (sequential):</p>
<div class="highlight-text"><div class="highlight"><pre>&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;plan name=&quot;origin=rest - action=deploy - filter=all - SEQUENTIAL&quot; fabric=&quot;glu-dev-1&quot;
      systemId=&quot;4836742aa34f6915fae3c0f46fbcc86ea381df74&quot; savedTime=&quot;1302892719254&quot;&gt;
  &lt;sequential origin=&quot;rest&quot; action=&quot;deploy&quot; filter=&quot;all&quot;&gt;
    &lt;sequential agent=&quot;agent-1&quot; mountPoint=&quot;/sample/i001&quot;&gt;
      &lt;leaf name=&quot;Start agent-1:/sample/i001 on agent-1&quot; /&gt;
    &lt;/sequential&gt;
    &lt;sequential agent=&quot;agent-1&quot; mountPoint=&quot;/sample/i003&quot;&gt;
      &lt;leaf name=&quot;Install script for installation agent-1:/sample/i003 on agent-1&quot; /&gt;
      &lt;leaf name=&quot;Install agent-1:/sample/i003 on agent-1&quot; /&gt;
      &lt;leaf name=&quot;Configure agent-1:/sample/i003 on agent-1&quot; /&gt;
      &lt;leaf name=&quot;Start agent-1:/sample/i003 on agent-1&quot; /&gt;
    &lt;/sequential&gt;
  &lt;/sequential&gt;
&lt;/plan&gt;
</pre></div>
</div>
<p>And the command (<tt class="docutils literal"><span class="pre">-p</span></tt> means parallel):</p>
<div class="highlight-text"><div class="highlight"><pre>./bin/console-cli.sh -f glu-dev-1 -u admin -x admin -a -n -p deploy
</pre></div>
</div>
<p>will produce the following output (parallel):</p>
<div class="highlight-text"><div class="highlight"><pre>&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;plan name=&quot;origin=rest - action=deploy - filter=all - PARALLEL&quot; fabric=&quot;glu-dev-1&quot;
      systemId=&quot;4836742aa34f6915fae3c0f46fbcc86ea381df74&quot; savedTime=&quot;1302892859008&quot;&gt;
  &lt;parallel origin=&quot;rest&quot; action=&quot;deploy&quot; filter=&quot;all&quot;&gt;
    &lt;sequential agent=&quot;agent-1&quot; mountPoint=&quot;/sample/i001&quot;&gt;
      &lt;leaf name=&quot;Start agent-1:/sample/i001 on agent-1&quot; /&gt;
    &lt;/sequential&gt;
    &lt;sequential agent=&quot;agent-1&quot; mountPoint=&quot;/sample/i003&quot;&gt;
      &lt;leaf name=&quot;Install script for installation agent-1:/sample/i003 on agent-1&quot; /&gt;
      &lt;leaf name=&quot;Install agent-1:/sample/i003 on agent-1&quot; /&gt;
      &lt;leaf name=&quot;Configure agent-1:/sample/i003 on agent-1&quot; /&gt;
      &lt;leaf name=&quot;Start agent-1:/sample/i003 on agent-1&quot; /&gt;
    &lt;/sequential&gt;
  &lt;/parallel&gt;
&lt;/plan&gt;
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <tt class="docutils literal"><span class="pre">-n</span></tt> option means <em>dry-run</em> and it allows you to display the deployment plan instead of executing it!</p>
</div>
</div>
</div>
<div class="section" id="deployer-logo-deployer">
<span id="goe-deployer"></span><h3><img alt="planner" class="header-logo" src="_images/deployer-logo-86.png" /> Deployer<a class="headerlink" href="#deployer-logo-deployer" title="Permalink to this headline">¶</a></h3>
<p>The deployer is responsible to execute the <a class="reference internal" href="#goe-plan"><em>deployment plan</em></a> computed by the <a class="reference internal" href="#goe-planner"><em>planner</em></a>. The deployer knows how to deploy arbitrarily complex deployment plans (sequential / parallel nested at any level) and reports its progress as it goes along, allowing the very dynamic view available in the console:</p>
<img alt="deployer in action" class="align-center" src="_images/goe-deployer-in-action.png" />
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">as you can see on the screenshot, every running action can be cancelled in the event there is a need for it.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>the command line is also using the reporting capabilities of the deployer to display a progress bar:</p>
<img alt="plan progress from the cli" class="last align-center" src="_images/tutorial-plan-progress-cli.png" />
</div>
</div>
</div>
<div class="section" id="rest-api">
<span id="goe-rest-api"></span><h2>REST api<a class="headerlink" href="#rest-api" title="Permalink to this headline">¶</a></h2>
<p>The orchestration engine offers a REST api (served by the console webapp).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You do not have to use the REST api directly: there is a convenient <a class="reference internal" href="#goe-cli"><em>command line interface (cli)</em></a> which is already using it. You would use the REST api directly, in cases when the cli is not enough or you want to have more control for example.</p>
</div>
<div class="section" id="security-authorization">
<h3>Security / Authorization<a class="headerlink" href="#security-authorization" title="Permalink to this headline">¶</a></h3>
<p>The security model is simply implementing http basic authorization: every request needs to come with an <tt class="docutils literal"><span class="pre">Authorization</span></tt> header with the following format:</p>
<div class="highlight-text"><div class="highlight"><pre>Authorization: Basic &lt;base64(username:password)&gt;
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The username and password are only slightly obfuscated (base 64) but it is not an issue because the cli talks to the console over https and as a result the headers are never traveling over an insecure channel.</p>
</div>
</div>
<div class="section" id="api">
<h3>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h3>
<p>Main URI: <tt class="docutils literal"><span class="pre">/console/rest/v1/&lt;fabric&gt;</span></tt> (all the URIs in the following tables starts with the main URI)</p>
<table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="23%" />
<col width="11%" />
<col width="28%" />
<col width="32%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Method</th>
<th class="head">URI</th>
<th class="head">Description</th>
<th class="head">Request</th>
<th class="head">Response</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><tt class="docutils literal"><span class="pre">GET</span></tt></td>
<td><tt class="docutils literal"><span class="pre">/plans</span></tt></td>
<td>List all the plans</td>
<td>N/A</td>
<td>TBD</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">POST</span></tt></td>
<td><tt class="docutils literal"><span class="pre">/plans</span></tt></td>
<td>Create a plan</td>
<td>view details below for the content of body of the
<tt class="docutils literal"><span class="pre">POST</span></tt></td>
<td><ul class="first last simple">
<li><tt class="docutils literal"><span class="pre">201</span></tt> (<tt class="docutils literal"><span class="pre">CREATED</span></tt>) with <tt class="docutils literal"><span class="pre">Location</span></tt> header to access
the plan (<tt class="docutils literal"><span class="pre">/plan/</span> <span class="pre">&lt;planId&gt;</span></tt>)</li>
<li><tt class="docutils literal"><span class="pre">204</span></tt> (<tt class="docutils literal"><span class="pre">NO</span> <span class="pre">CONTENT</span></tt>) when no plan created because
there is nothing to do</li>
</ul>
</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">GET</span></tt></td>
<td><tt class="docutils literal"><span class="pre">/plan/&lt;planId&gt;</span></tt></td>
<td>View the plan (as an
xml document)</td>
<td>N/A</td>
<td><ul class="first last simple">
<li><tt class="docutils literal"><span class="pre">200</span></tt> (<tt class="docutils literal"><span class="pre">OK</span></tt>) with an xml representation of the plan</li>
<li><tt class="docutils literal"><span class="pre">404</span></tt> (<tt class="docutils literal"><span class="pre">NOT_FOUND</span></tt>) if no such plan</li>
</ul>
</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">POST</span></tt></td>
<td><tt class="docutils literal"><span class="pre">/plan/&lt;planId&gt;/execution</span></tt></td>
<td>Executes the plan</td>
<td>N/A</td>
<td><ul class="first simple">
<li><tt class="docutils literal"><span class="pre">201</span></tt> (<tt class="docutils literal"><span class="pre">CREATED</span></tt>) with <tt class="docutils literal"><span class="pre">Location</span></tt> header to access
the plan execution (<tt class="docutils literal"><span class="pre">/plan/</span> <span class="pre">&lt;planId&gt;/</span> <span class="pre">execution/</span>
<span class="pre">&lt;executionId&gt;</span></tt>).</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">it is a non blocking call and it returns right
away and you can check the progress thus allowing to
have a progress bar!</p>
</div>
<ul class="last simple">
<li><tt class="docutils literal"><span class="pre">404</span></tt> (<tt class="docutils literal"><span class="pre">NOT_FOUND</span></tt>) if no such plan</li>
</ul>
</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">HEAD</span></tt></td>
<td><tt class="docutils literal"><span class="pre">/plan/&lt;planId&gt;/execution/&lt;executionId&gt;</span></tt></td>
<td>Returns the status
of the execution</td>
<td>N/A</td>
<td><ul class="first last">
<li><p class="first"><tt class="docutils literal"><span class="pre">200</span></tt> (<tt class="docutils literal"><span class="pre">OK</span></tt>) with <tt class="docutils literal"><span class="pre">X-LinkedIn-GLU-Completion</span></tt> header
with value:</p>
<p>a. if plan non completed, percentage completion (ex:
<tt class="docutils literal"><span class="pre">87</span></tt>)</p>
<p>b. if completed: <tt class="docutils literal"><span class="pre">100:&lt;completion</span> <span class="pre">status&gt;</span></tt> (ex:
<tt class="docutils literal"><span class="pre">100:FAILED</span></tt> or <tt class="docutils literal"><span class="pre">100:COMPLETED</span></tt>)</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">404</span></tt> (<tt class="docutils literal"><span class="pre">NOT_FOUND</span></tt>) if no such execution</p>
</li>
</ul>
</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">GET</span></tt></td>
<td><tt class="docutils literal"><span class="pre">/plan/&lt;planId&gt;/execution/&lt;executionId&gt;</span></tt></td>
<td>Returns the
execution as an xml
document</td>
<td>N/A</td>
<td><ul class="first last simple">
<li><tt class="docutils literal"><span class="pre">200</span></tt> (<tt class="docutils literal"><span class="pre">OK</span></tt>) with an xml representation of the
execution (equivalent to the view in the console)</li>
<li><tt class="docutils literal"><span class="pre">404</span></tt> (<tt class="docutils literal"><span class="pre">NOT_FOUND</span></tt>) if no such execution</li>
</ul>
</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">DELETE</span></tt></td>
<td><tt class="docutils literal"><span class="pre">/plan/&lt;planId&gt;/execution/&lt;executionId&gt;</span></tt></td>
<td>Aborts the execution</td>
<td>N/A</td>
<td>TBD</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">POST</span></tt></td>
<td><tt class="docutils literal"><span class="pre">/model/static</span></tt></td>
<td>Loads the (desired)
model in the console</td>
<td><p class="first">Body can be of 2 types depending on the
<tt class="docutils literal"><span class="pre">Content-Type</span></tt> header:</p>
<p><tt class="docutils literal"><span class="pre">application/x-www-form-urlencoded</span></tt> then body
should contain <tt class="docutils literal"><span class="pre">modelUrl=xxx</span></tt> with the url
pointing to the model (the console will &#8216;download&#8217;
it)</p>
<p class="last"><tt class="docutils literal"><span class="pre">text/json</span></tt> then body should be the model itself
(<a class="reference external" href="https://gist.github.com/755981">example</a>)</p>
</td>
<td><ul class="first last simple">
<li><tt class="docutils literal"><span class="pre">201</span></tt> (<tt class="docutils literal"><span class="pre">CREATED</span></tt>) when loaded successfully</li>
<li><tt class="docutils literal"><span class="pre">204</span></tt> (<tt class="docutils literal"><span class="pre">NO_CONTENT</span></tt>) if model was loaded successfully
and is equal to the previous one</li>
<li><tt class="docutils literal"><span class="pre">400</span></tt> (<tt class="docutils literal"><span class="pre">BAD_REQUEST</span></tt>) if the model is not valid
(should be a properly json formatted document)</li>
<li><tt class="docutils literal"><span class="pre">404</span></tt> (<tt class="docutils literal"><span class="pre">NOT_FOUND</span></tt>) when error (note error handling
needs to be revisited)</li>
</ul>
</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">GET</span></tt></td>
<td><tt class="docutils literal"><span class="pre">/model/static</span></tt></td>
<td>Retrieves the
current loaded model
(aka &#8216;desired&#8217;
state)</td>
<td><p class="first">optional request parameters:</p>
<p><tt class="docutils literal"><span class="pre">prettyPrint=true</span></tt> for human readable output</p>
<p class="last"><tt class="docutils literal"><span class="pre">systemFilter=...</span></tt> for filtering (see
<a class="reference internal" href="filtering.html#goe-filter-syntax"><em>Filter syntax</em></a> for the syntax)</p>
</td>
<td><ul class="first last simple">
<li><tt class="docutils literal"><span class="pre">200</span></tt> (<tt class="docutils literal"><span class="pre">OK</span></tt>) with a json representation of the model</li>
</ul>
</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">GET</span></tt></td>
<td><tt class="docutils literal"><span class="pre">/model/live</span></tt></td>
<td>Retrieves the
current live model
coming from
ZooKeeper (aka
current state)</td>
<td><p class="first">optional request parameters:</p>
<p><tt class="docutils literal"><span class="pre">prettyPrint=true</span></tt> for human readable output</p>
<p class="last"><tt class="docutils literal"><span class="pre">systemFilter=...</span></tt> for filtering (see
<a class="reference internal" href="filtering.html#goe-filter-syntax"><em>Filter syntax</em></a> for the syntax)</p>
</td>
<td><ul class="first simple">
<li><tt class="docutils literal"><span class="pre">200</span></tt> (<tt class="docutils literal"><span class="pre">OK</span></tt>) with a json representation of the live
model</li>
</ul>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">the metadata contains information like
<tt class="docutils literal"><span class="pre">currentState</span></tt></p>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="api-examples">
<h3>API Examples<a class="headerlink" href="#api-examples" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Sending the model to glu in <a class="reference external" href="https://gist.github.com/756465">java</a></li>
<li><a class="reference external" href="https://github.com/linkedin/glu/blob/REL_1.5.0/console/org.linkedin.glu.console-cli/src/cmdline/resources/lib/python/gluconsole/rest.py">Python example</a> (part of the cli)</li>
</ul>
</div>
</div>
<div class="section" id="representing-a-plan">
<h2>Representing a plan<a class="headerlink" href="#representing-a-plan" title="Permalink to this headline">¶</a></h2>
<div class="section" id="query-string-based">
<h3>Query String based<a class="headerlink" href="#query-string-based" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">POST</span></tt> you issue must be of Content-Type <tt class="docutils literal"><span class="pre">application/x-www-form-urlencoded</span></tt></p>
<p>The body then contains a query string with the following parameters:</p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="19%" />
<col width="17%" />
<col width="46%" />
</colgroup>
<tbody valign="top">
<tr><td>name</td>
<td>value</td>
<td>required</td>
<td>example</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">planAction</span></tt></td>
<td><tt class="docutils literal"><span class="pre">start</span></tt>, <tt class="docutils literal"><span class="pre">stop</span></tt>,
<tt class="docutils literal"><span class="pre">bounce</span></tt>,
<tt class="docutils literal"><span class="pre">deploy</span></tt>,
<tt class="docutils literal"><span class="pre">undeploy</span></tt>,
<tt class="docutils literal"><span class="pre">redeploy</span></tt></td>
<td>Yes</td>
<td><tt class="docutils literal"><span class="pre">planAction=start</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">systemFilter</span></tt></td>
<td>a system filter as
described in the
previous section
(remember that it
<strong>must</strong> be properly
url encoded.</td>
<td>No. It simply means
don&#8217;t filter at all.</td>
<td><tt class="docutils literal"><span class="pre">systemFilter=and%7bagent%3d'ei2-app3-zone5.qa'%7d</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">order</span></tt></td>
<td><tt class="docutils literal"><span class="pre">parallel</span></tt> or
<tt class="docutils literal"><span class="pre">sequential</span></tt></td>
<td>No. Default to
<tt class="docutils literal"><span class="pre">sequential</span></tt></td>
<td><tt class="docutils literal"><span class="pre">order=parallel</span></tt></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="json-dsl-based">
<h2>Json/DSL Based<a class="headerlink" href="#json-dsl-based" title="Permalink to this headline">¶</a></h2>
<p>Coming soon</p>
</div>
<div class="section" id="command-line">
<span id="goe-cli"></span><h2>Command Line<a class="headerlink" href="#command-line" title="Permalink to this headline">¶</a></h2>
<p>The orchestration engine also comes with a cli which is essentially a wrapper around the REST api which can be used in several ways:</p>
<ul class="simple">
<li>directly to issue commands</li>
<li>to build higher level cli(s) which use this cli as a base</li>
<li>as an example for how to talk to the REST api directly</li>
</ul>
<p>The cli currently requires python 2.6 to run.</p>
<div class="section" id="help">
<h3>Help<a class="headerlink" href="#help" title="Permalink to this headline">¶</a></h3>
<p>This is the output when using the <tt class="docutils literal"><span class="pre">-h</span></tt> option</p>
<p>Usage:</p>
<div class="highlight-text"><div class="highlight"><pre>console-cli.py -f &lt;fabric&gt; &lt;start|stop|bounce|deploy|undeploy|redeploy|load|status&gt; [flags]
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The orchestration engine cli is currently called <tt class="docutils literal"><span class="pre">console-cli</span></tt> because of the fact that the orchestration engine is currently running inside the console.</p>
</div>
<p>Options:</p>
<dl class="option">
<dt id="cmdoption--version">
<tt class="descname">--version</tt><tt class="descclassname"></tt><a class="headerlink" href="#cmdoption--version" title="Permalink to this definition">¶</a></dt>
<dd><p>show program&#8217;s version number and exit</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-h">
<tt class="descname">-h</tt><tt class="descclassname"></tt><tt class="descclassname">, </tt><tt class="descname">--help</tt><tt class="descclassname"></tt><a class="headerlink" href="#cmdoption-h" title="Permalink to this definition">¶</a></dt>
<dd><p>show this help message and exit</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-d">
<tt class="descname">-d</tt><tt class="descclassname"></tt><tt class="descclassname">, </tt><tt class="descname">--debug</tt><tt class="descclassname"></tt><a class="headerlink" href="#cmdoption-d" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn on debug output</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-c">
<tt class="descname">-c</tt><tt class="descclassname"> CONSOLEURL</tt><tt class="descclassname">, </tt><tt class="descname">--console</tt><tt class="descclassname">=CONSOLEURL</tt><a class="headerlink" href="#cmdoption-c" title="Permalink to this definition">¶</a></dt>
<dd><p>Url to glu Console for the given fabric.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-f">
<tt class="descname">-f</tt><tt class="descclassname"> FABRIC</tt><tt class="descclassname">, </tt><tt class="descname">--fabric</tt><tt class="descclassname">=FABRIC</tt><a class="headerlink" href="#cmdoption-f" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform action on a fabric</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-u">
<tt class="descname">-u</tt><tt class="descclassname"> USER</tt><tt class="descclassname">, </tt><tt class="descname">--user</tt><tt class="descclassname">=USER</tt><a class="headerlink" href="#cmdoption-u" title="Permalink to this definition">¶</a></dt>
<dd><p>glu user to use for authentication, defaults to <tt class="docutils literal"><span class="pre">$USER</span></tt></p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-x">
<tt class="descname">-x</tt><tt class="descclassname"> PASSWORD</tt><tt class="descclassname">, </tt><tt class="descname">--xpassword</tt><tt class="descclassname">=PASSWORD</tt><a class="headerlink" href="#cmdoption-x" title="Permalink to this definition">¶</a></dt>
<dd><p>Password. Warning password will appear in clear in <tt class="docutils literal"><span class="pre">ps</span></tt> output. Use only for testing.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-X">
<tt class="descname">-X</tt><tt class="descclassname"> PASSWORDFILE</tt><tt class="descclassname">, </tt><tt class="descname">--xpasswordfile</tt><tt class="descclassname">=PASSWORDFILE</tt><a class="headerlink" href="#cmdoption-X" title="Permalink to this definition">¶</a></dt>
<dd><p>Read user password from passwordfile specified. Make sure to protect this file using unix permissions</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-a">
<tt class="descname">-a</tt><tt class="descclassname"></tt><tt class="descclassname">, </tt><tt class="descname">--all</tt><tt class="descclassname"></tt><a class="headerlink" href="#cmdoption-a" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform action on all entries</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-A">
<tt class="descname">-A</tt><tt class="descclassname"> AGENT</tt><tt class="descclassname">, </tt><tt class="descname">--agent</tt><tt class="descclassname">=AGENT</tt><a class="headerlink" href="#cmdoption-A" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform action on one or more agent(s)</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-t">
<tt class="descname">-t</tt><tt class="descclassname"> ALLTAGS</tt><tt class="descclassname">, </tt><tt class="descname">--allTags</tt><tt class="descclassname">=ALLTAGS</tt><a class="headerlink" href="#cmdoption-t" title="Permalink to this definition">¶</a></dt>
<dd><p>Shortcut for querying by tags (all tags must be present): frontend;backend</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-T">
<tt class="descname">-T</tt><tt class="descclassname"> ANYTAG</tt><tt class="descclassname">, </tt><tt class="descname">--anyTag</tt><tt class="descclassname">=ANYTAG</tt><a class="headerlink" href="#cmdoption-T" title="Permalink to this definition">¶</a></dt>
<dd><p>Shortcut for querying by tags (any of the tags need to be present): frontend;backend</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-I">
<tt class="descname">-I</tt><tt class="descclassname"> INSTANCE</tt><tt class="descclassname">, </tt><tt class="descname">--instance</tt><tt class="descclassname">=INSTANCE</tt><a class="headerlink" href="#cmdoption-I" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform action on one or more instance(s)</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-p">
<tt class="descname">-p</tt><tt class="descclassname"></tt><tt class="descclassname">, </tt><tt class="descname">--parallel</tt><tt class="descclassname"></tt><a class="headerlink" href="#cmdoption-p" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform action on all instances in parallel. Default is serial.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-n">
<tt class="descname">-n</tt><tt class="descclassname"></tt><tt class="descclassname">, </tt><tt class="descname">--dryrun</tt><tt class="descclassname"></tt><a class="headerlink" href="#cmdoption-n" title="Permalink to this definition">¶</a></dt>
<dd><p>Do a dry run of your plan. No changes will be made. Default is false.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-s">
<tt class="descname">-s</tt><tt class="descclassname"> FILTER</tt><tt class="descclassname">, </tt><tt class="descname">--systemFilter</tt><tt class="descclassname">=FILTER</tt><a class="headerlink" href="#cmdoption-s" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter in DSL sytax for filtering the model. Applicable only with &#8216;status&#8217; command. See <a class="reference internal" href="filtering.html#goe-filter-syntax"><em>Filter syntax</em></a>.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-S">
<tt class="descname">-S</tt><tt class="descclassname"> FILTERFILE</tt><tt class="descclassname">, </tt><tt class="descname">--systemFilterFile</tt><tt class="descclassname">=FILTERFILE</tt><a class="headerlink" href="#cmdoption-S" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter file with filters in DSL sytax for filtering the model. Applicable only with &#8216;status&#8217; command. See <a class="reference internal" href="filtering.html#goe-filter-syntax"><em>Filter syntax</em></a>.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-m">
<tt class="descname">-m</tt><tt class="descclassname"> MODEL</tt><tt class="descclassname">, </tt><tt class="descname">--model</tt><tt class="descclassname">=MODEL</tt><a class="headerlink" href="#cmdoption-m" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads the model pointed to by model (should be a url!)</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-M">
<tt class="descname">-M</tt><tt class="descclassname"> MODELFILE</tt><tt class="descclassname">, </tt><tt class="descname">--modelFile</tt><tt class="descclassname">=MODELFILE</tt><a class="headerlink" href="#cmdoption-M" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads the model from the file</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-l">
<tt class="descname">-l</tt><tt class="descclassname"></tt><tt class="descclassname">, </tt><tt class="descname">--live</tt><tt class="descclassname"></tt><a class="headerlink" href="#cmdoption-l" title="Permalink to this definition">¶</a></dt>
<dd><p>Show current model instead of expected model. Applicable only with &#8216;status&#8217; command.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-b">
<tt class="descname">-b</tt><tt class="descclassname"></tt><tt class="descclassname">, </tt><tt class="descname">--beautify</tt><tt class="descclassname"></tt><a class="headerlink" href="#cmdoption-b" title="Permalink to this definition">¶</a></dt>
<dd><p>Pretty print the model.</p>
</dd></dl>

<p>Unless you run the cli on the same host as the console you will need to specify its location:</p>
<blockquote>
<div><p>Example:</p>
<div class="highlight-text"><div class="highlight"><pre>-c https://glu.console.host:8443/console
</pre></div>
</div>
</div></blockquote>
<p>Here are some examples of usage:</p>
<div class="highlight-text"><div class="highlight"><pre># View the current loaded model (and format it for readability):
./bin/console-cli.py -f glu-dev-1 -u admin -x admin -b status

# View the live model only for applications in cluster cluster-1 (and format it for readability):
./bin/console-cli.py -f glu-dev-1 -u admin -x admin -b -l -s &quot;metadata.cluster=&#39;cluster-1&#39;&quot; status

# Show me what will happen if I bounce all applcations in cluster cluster-1 (but don&#39;t do it!):
./bin/console-cli.py -f glu-dev-1 -u admin -x admin -s &quot;metadata.cluster=&#39;cluster-1&#39;&quot; -n bounce

# Bounce all applcations in cluster cluster-1:
./bin/console-cli.py -f glu-dev-1 -u admin -x admin -s &quot;metadata.cluster=&#39;cluster-1&#39;&quot; bounce
</pre></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
</div>
<div class="sidebar">
  <div class="sidebar-entry">
    <h3>Table Of Contents</h3>
    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">What is glu?</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">A taste of glu (tutorial)</a></li>
<li class="toctree-l1"><a class="reference internal" href="agent.html"> Agent</a></li>
<li class="toctree-l1"><a class="reference internal" href="glu-script.html"> glu script</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href=""> Orchestration engine</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#key-components">Key Components</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#tracker-logo-tracker"> Tracker</a></li>
<li class="toctree-l3"><a class="reference internal" href="#live-model-logo-live-model"> Live Model</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#from-the-console">From the console</a></li>
<li class="toctree-l4"><a class="reference internal" href="#from-the-command-line">From the command line</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#static-model-logo-static-model"> Static Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="#delta-service-logo-delta-service"> Delta Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="#delta-logo-delta"> Delta</a></li>
<li class="toctree-l3"><a class="reference internal" href="#visualizer-logo-visualizer"> Visualizer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#planner-logo-planner"> Planner</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plan-logo-deployment-plan"> Deployment Plan</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id1">From the Console</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id2">From the Command Line</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#deployer-logo-deployer"> Deployer</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#rest-api">REST api</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#security-authorization">Security / Authorization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#api">API</a></li>
<li class="toctree-l3"><a class="reference internal" href="#api-examples">API Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#representing-a-plan">Representing a plan</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#query-string-based">Query String based</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#json-dsl-based">Json/DSL Based</a></li>
<li class="toctree-l2"><a class="reference internal" href="#command-line">Command Line</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#help">Help</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="static-model.html"> Static Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="filtering.html"> Filtering</a></li>
<li class="toctree-l1"><a class="reference internal" href="console.html"> Console</a></li>
<li class="toctree-l1"><a class="reference internal" href="production-setup.html">Production Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev-setup.html">Development Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="RELEASE.html">Latest changes</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="contents.html">All content</a></li>
</ul>

  </div>
<div class="sidebar-entry">
  <h3>Quick Links</h3>
  <ul class="quick-links">
    <li><a href="https://github.com/linkedin/glu/downloads">Download</a>
    <li><a href="tutorial.html">Tutorial</a>
    <li><a href="http://www.github.com/linkedin/glu">Source Code</a>
    <li><a href="http://glu.977617.n3.nabble.com/">Forum / Questions / Help</a>
    <li><a href="http://twitter.com/glutweets">Twitter</a>
    <li><a href="https://github.com/linkedin/glu/issues">Issues / Tasks</a>
    <li><a href="RELEASE.html">Latest Changes</a>
  </ul>
</div>
  <div class="sidebar-entry">
    <h3>Twitter</h3>
    <script type="text/javascript">
      new TWTR.Widget({
                        version: 2,
                        type: 'profile',
                        rpp: 4,
                        interval: 6000,
                        width: 'auto',
                        height: 300,
                        theme: {
                          shell: {
                            background: '#dddddd',
                            color: '#000000'
                          },
                          tweets: {
                            background: '#ffffff',
                            color: '#000000',
                            links: '#ce5c00'
                          }
                        },
                        features: {
                          scrollbar: false,
                          loop: false,
                          live: false,
                          hashtags: true,
                          timestamp: true,
                          avatars: true,
                          behavior: 'all'
                        }
                      }).render().setUser('glutweets').start();
    </script>
  </div>
</div>
<div class="clearer"></div>
</div>

</div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <a href="glu-script.html" title="glu script"
             >previous</a> |
          <a href="static-model.html" title="Static Model"
             >next</a> |
          <a href="genindex.html" title="General Index"
             >index</a>
        </div>

        <div class="right">
          
    <div class="footer">
        &copy; Copyright 2011, Yan Pujante.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>